---
layout: post
title: "C 언어: 난수생성 (rand(), srand(), time())"
categories:
  - C 언어
tags:
  - c
  - 난수 생성
  - 주사위 구현
---

## 개요
프로그래밍을 배우다 보면 난수(Random Number)를 생성해야 하는 경우가 종종 생깁니다.
대표적인 예로는 확률과 관련된것들이 있겠네요. (게임에서의 아이템 드랍율, 온라인게임에서 주사위 루팅 등등)
여기서는 **C언어에서 간단하게 난수를 발생시키는 방법** 을 설명드리겠습니다.

## 난수를 생성하는 rand() 함수
일단 난수를 생성하기 위해서는 기본 라이브러리에서 지원하는 `rand()` 함수를 사용하여야 합니다.
아울러 rand() 함수를 사용하려면 `stdlib.h` 헤더파일을 코드에 포함시켜야 합니다.
rand() 함수 간단한 사용법 예제입니다.

{% highlight c %}
#include <stdio.h>
#include <stdlib.h> // rand() 함수가 포함된 헤더파일

int main(void)
{
  int i = 0;
  printf("rand() 함수를 사용하여 10개의 난수를 생성\n");

  for (i=0 ; i<10 ; i++)
  {
    printf("%d\n", rand()); // 난수 생성
  }

  return 0;
}
{% endhighlight %}

위 코드의 실행 결과는 다음과 같습니다.

```
rand() 함수를 사용하여 10개의 난수를 생성
1804289383
846930886
1681692777
1714636915
1957747793
424238335
719885386
1649760492
596516649
1189641421
```

### 의문점 1. 난수의 생성 범위는 어디까지인가요?
난수의 범위는 0~N 이며, N은 시스템마다 값이 다릅니다.
`stdlib.h` 헤더파일 안에 RAND_MAX 라는 값이 존재하는데, 해당 값이 난수의 최대값입니다.

### 의문점 2. 프로그램을 여러번 실행시 계속 똑같은 난수 10개가 생성됩니다.
위의 간단한 사용법에서는 단순히 rand() 함수를 호출했습니다.
사실 rand() 함수는 어떤 기준 숫자를 가지고 난수를 생성하는데요,
다음 챕터에서는 기준 숫자를 설정하는 방법에 대해 설명합니다.

## 난수의 기준값을 설정하는 srand() 함수
난수를 만들기 위해 기준을 설정하는 역할을 하는것이 `srand()` 함수입니다.
srand()에 인자로 들어가는 값을 `시드(seed) 값`이라고 합니다.
사실 rand() 함수는 이 시드 값을 가지고 난수를 생성합니다.
위의 예제에 srand() 함수를 넣어보겠습니다.
{% highlight c %}
#include <stdio.h>
#include <stdlib.h> // rand() 함수가 포함된 헤더파일

int main(void)
{
  int i = 0;
  printf("srand(1) 이후에 rand() 함수를 사용하여 10개의 난수를 생성\n");
  srand(1); // seed값 1로 설정
  for (i=0 ; i<10 ; i++)
  {
    printf("%d\n", rand()); // 난수 생성
  }

  printf("srand(2) 이후에 rand() 함수를 사용하여 10개의 난수를 생성\n");
  srand(2); // seed값 2로 설정
  for (i=0 ; i<10 ; i++)
  {
    printf("%d\n", rand()); // 난수 생성
  }

  return 0;
}
{% endhighlight %}

위 코드의 실행 결과는 다음과 같습니다.

```
srand(1) 이후에 rand() 함수를 사용하여 10개의 난수를 생성
1804289383
846930886
1681692777
1714636915
1957747793
424238335
719885386
1649760492
596516649
1189641421
srand(2) 이후에 rand() 함수를 사용하여 10개의 난수를 생성
1505335290
1738766719
190686788
260874575
747983061
906156498
1502820864
142559277
1261608745
1380759627
```
srand() 함수를 이용하여 시드 값을 바꿔주면 다른 난수가 생성되는것을 확인할 수 있습니다.
즉 **프로그램이 실행될 때 마다 srand() 함수에 다른 값을 넣어주면, 매번 다른 난수가 생성된다.** 는 것입니다.
그렇다면, 실행 시 매번 다른 값을 넣어주려면 어떻게 해야할까요?
다음 장에서 간단한 방법을 소개합니다.

## 시간 값을 리턴하는 time() 함수
`time(NULL)`함수는 **1970년 1월 1일 이후 경과된 시간을 초 단위 값** 으로 반환합니다.
time() 함수를 사용하려면 `time.h` 헤더파일을 포함하여야 합니다.
개선된 예제는 다음과 같습니다.
{% highlight c %}
#include <stdio.h>
#include <stdlib.h> // rand() 함수가 포함된 헤더파일
#include <time.h> // time() 함수가 포함된 헤더파일

int main(void)
{
	int i = 0;
	printf("srand(time(NULL)) 이후에 rand() 함수를 사용하여 10개의 난수를 생성\n");
	srand(time(NULL)); // 시드 값을 time(NULL)의 반환값으로 설정
	for (i=0 ; i<10 ; i++)
	{
		printf("%d\n", rand()); // 난수 생성
	}

	return 0;
}
{% endhighlight %}
위 코드를 두번 실행한 결과는 다음과 같습니다.
```
srand(time(NULL)) 이후에 rand() 함수를 사용하여 10개의 난수를 생성
252977097
1922769410
1272375906
426206964
1352133548
1249038742
2075670486
212431108
828876866
1060170143
srand(time(NULL)) 이후에 rand() 함수를 사용하여 10개의 난수를 생성
1181404031
958776526
1825162240
2040677834
1881362097
1452609952
110661648
909018733
1736482445
705012468
```
이제 매 실행시 다른 난수를 생성합니다.

### 그렇다면 어떻게 써먹을 것인가?
이제 rand() 함수가 나름대로 의미있는 난수를 생성할 수 있으므로, 다음과 같이 활용할 수 있습니다.
`rand() % 6 + 1`과 같이 사용하면 **1~6 범위의 난수** 를 생성하는 주사위를 구현할 수 있습니다.
`rand() % 100 + 1`과 같이 사용하면 **1~100 범위의 난수** 를 생성하는 루팅 주사위를 구현할 수 있습니다. 이 외에도 적절히 구현한다면, 자신이 원하는 범위의 난수를 만들 수 있을 것입니다.
